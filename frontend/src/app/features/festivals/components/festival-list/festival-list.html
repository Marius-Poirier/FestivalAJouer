<div class="list-container">
    @if (festivalService.error()) {
        <div class="error-banner">
            {{ festivalService.error() }}
        </div>
    }
    <div class="header-controls">
        <div class="search-bar">
            <mat-icon class="search-icon">search</mat-icon>
            <input 
                type="text" 
                placeholder="Rechercher un festival (nom ou lieu)..."
                [value]="searchTerm()"
                (input)="onSearch($event)"
            />
        </div>

        @if (authService.isAdminSuperorga()){
            <button class="btn-add" (click)="show()">+ Ajouter un festival</button>
        }
    </div>
    
    @if (festivalService.isLoading()) {
        <p class="loading">Chargement des festivals...</p>
    } @else {
        <ul class="items-list">
            @for (fest of filteredFestivals(); track fest.id) {
                <li>
                    @let hiddenFestival = false;
                    <app-festival-card 
                    [idFestival]="fest.id"
                    [hidden]="hiddenFestival">
                    </app-festival-card>
                </li>
            }
        </ul>
    }

    @if(showForm()){
        <app-festival-form (closeForm)="show()"></app-festival-form>
    }
    
</div>


