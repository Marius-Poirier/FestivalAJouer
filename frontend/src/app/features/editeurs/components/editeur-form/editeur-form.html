<div class="from-editeur-container" (click)="close()">
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    (click)="$event.stopPropagation()"
  >
    <h2 class="add">

        Ajouter un éditeur
    
    </h2>

    @if (editeurService.error()) {
      <div class="error-message">
        {{ editeurService.error() }}
      </div>
    }

    <mat-form-field appearance="fill">
      <mat-label>Nom éditeur</mat-label>
      <input
        matInput
        type="text"
        formControlName="nom"
        placeholder="Nom de l'éditeur"
        [disabled]="editeurService.isLoading()"
      />
    </mat-form-field>

    @if (form.controls.nom.invalid && form.controls.nom.touched) {
      @if (form.controls.nom.hasError('required')) {
        <span class="error-text-input">
          Le nom est requis
        </span>
      } @else if (form.controls.nom.hasError('minlength')) {
        <span class="error-text-input">
          Le nom doit contenir au moins 3 caractères
        </span>
      }
    }

    <mat-form-field appearance="fill">
      <mat-label>URL du logo (optionnel)</mat-label>
      <input
        matInput
        type="text"
        formControlName="logo_url"
        placeholder="https://..."
        [disabled]="editeurService.isLoading()"
      />
    </mat-form-field> 

    <div class="form-actions">
      <button
        type="submit"
 
        color="primary"
        [disabled]="form.invalid || editeurService.isLoading()"
      >
        @if (editeurService.isLoading()) {
          Enregistrement...
        } 
          Enregistrer

      </button>

      <button
        type="button"
        (click)="close()"
 
        [disabled]="editeurService.isLoading()"
      >
        Fermer
      </button>
    </div>
  </form>
</div>
