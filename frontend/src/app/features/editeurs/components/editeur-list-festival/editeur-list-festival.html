<div class="list-container">
    @if (editeursvc.error()) {
        <div class="error-banner">
            {{ editeursvc.error() }}
        </div>
    }
        <div class="header-controls">
                <div class="search-bar">
                    <mat-icon class="search-icon">search</mat-icon>
                    <input
                        type="text"
                        placeholder="Rechercher un éditeur..."
                        [value]="searchTerm()"
                        (input)="onSearch($event)"
                    />
                </div>
                @if (authService.isAdminSuperorga()){
                        <button class="btn-add" (click)="openCreateForm()">+ Nouvel éditeur</button>
                }
        </div>
    
    @if (editeursvc.isLoading()) {
        <p class="loading">Chargement des éditeurs...</p>
    } @else {
        @if(filteredEditeurs().length > 0){
            <ul class="items-list">
                @for (editeur of filteredEditeurs(); track editeur.id) {
                    <li>
                        <app-editeur-card
                            [editeur]="editeur"
                            [canManage]="authService.isAdminSuperorga()"
                            (delete)="onDelete($event)"
                            (update)="onUpdate($event)"
                            (detail)="onDetail($event)">
                        </app-editeur-card>
                    </li>
                }
            </ul>
        }
        @else {
            <p>Aucun éditeur trouvé pour ce festival</p>
        }
    }

    @if(showForm()){
        <app-editeur-form
            [editeur]="editingEditeur()"
            (closeForm)="closeForm()">
        </app-editeur-form>
    }
</div>
